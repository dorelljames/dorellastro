---
import { getCollection } from 'astro:content'
import Layout from '../../layouts/Layout.astro'

const allBlogPosts = await getCollection('blog', ({ data }) => {
	return data.categories?.includes('Web Development') && !data?.draft
})
const sortedBlogPosts = allBlogPosts?.sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
---

<Layout title="All posts">
	<h1>Personal blog by @dorelljames</h1>
	<p>I love you and coding.</p>

	<div class="section">
		<h2 class="primaryHeading">LATEST</h2>

		{
			sortedBlogPosts.map((post) => (
				<div class="projectCard">
					{/* {post.data?.featured_image && <img class="cover" src={post.data?.featured_image?.src} />} */}
					<h3 data-name={'post--' + post.slug} transition:name={'post--' + post.slug}>
						<a href={`/blog/${post?.slug}`} data-astro-reload>
							{post.data.title}
						</a>
					</h3>
					<div>
						<p transition:name={'body' + post.data.description}>{post.data.description}</p>
					</div>
				</div>
			))
		}
	</div>
</Layout>

<style>
	.section {
		margin-top: 15rem;
	}

	.cover {
		max-width: 75%;
	}

	h1 {
		font-family: 'DM Serif Text', serif;
		font-size: 42px;
		font-weight: 500;
	}

	.primaryHeading {
		letter-spacing: 12px;
		font-weight: 400;
	}

	.projectCard {
		margin-top: 7rem;
		margin-bottom: 7rem;
	}

	.projectCard > h3,
	.projectCard > h3 > a {
		/* margin-bottom: 24px; */
		font-family: 'DM Serif Text', serif;
		font-size: 32px;
		font-weight: 300;
		text-decoration: none;
		color: #000;
	}

	h1,
	h2,
	h3,
	h4,
	h5 {
		font-family: 'DM Serif Text', serif;
		font-weight: 500;
	}

	p {
		line-height: 200%;
		margin: 24px 0;
	}
</style>
